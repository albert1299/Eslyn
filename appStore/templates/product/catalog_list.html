{% extends 'body.html' %}
{% load static %}
{% block head %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous" />
<link rel="stylesheet" href="{% static 'css/shopping_cart.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap5.min.css" />
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap5.min.js"></script>
{% endblock %}
{% block content %}
<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button"
      role="tab" aria-controls="pills-home" aria-selected="true">Elegir productos</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button"
      role="tab" aria-controls="pills-profile" aria-selected="false"><i class="fas fa-shopping-cart"></i></button>
  </li>
</ul>
<div class="alert container position-sticky top-0 alert-primary hide" role="alert">
  ¡Producto agregado al carrito!
</div>
<div class="alert container position-sticky top-0 alert-danger remove" role="alert">
  ¡Producto quitado del carrito!
</div>
<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
    <div class="card card-default">
      <div class="card-header">
        <h3 class="card-title">
          <i class="fas fa-search"></i>
          {{ title }}
        </h3>
      </div>
      <div class="card-body">
        <table class="table" id="data">
          <thead>
            <tr>
              <th scope="col">Id</th>
              <th scope="col">Nombre</th>
              <th scope="col">Precio</th>
              <th scope="col">Stock</th>
              <th scope="col">Descripción</th>
              <th scope="col">Categoría</th>
              <th scope="col">Imagen</th>
              <th scope="col">Opciones</th>
            </tr>
          </thead>
          <tbody>
            {% for product in object_list %}
            <tr class="current_product">
              <td id="product_id">{{ product.id }}</td>
              <td id="product_name">{{ product.name }}</td>
              <td id="product_price">$ {{ product.price }}</td>
              <td id="product_stock">{{ product.stock }}</td>
              <td id="product_description">{% if product.description %} {{ product.description }} {% else %} (Sin
                descripción) {% endif %}</td>
              <td id="product_category">{{ product.category }}</td>
              <td class="text-center"><img id="product_image" src="/media/{{ product.image}}"
                  class="img-fluid d-block mx-auto" style="width: 9rem;
                  object-fit: contain;
                  border-radius: 6px;
                  margin-right: 20px;">
              </td>
              <td class="text-center">
                <button class="btn btn-primary btn-sm button"><i class="fas fa-shopping-cart"></i> Añadir</button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
    <div class="card card-default">
      <div class="card-header">
        <h3 class="card-title">
          <i class="fas fa-search"></i>
        </h3>
      </div>
      <div class="card-body">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Id</th>
              <th scope="col">Productos</th>
              <th scope="col">Precio</th>
              <th scope="col">Cantidad</th>
            </tr>
          </thead>
          <tbody class="tbody">
          </tbody>
        </table>
      </div>
      <div class="card-footer">
        <div class="row mx-4">
          <div class="col">
            <h3 class="CartTotal text-back">Total: 0</h3>
          </div>
          <div class="col d-flex justify-content-end">
            <button class="btn btn-success">COMPRAR</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block javascript %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
<script src="{% static 'js/shopping_cart.js' %}"></script>
<script type="application/javascript">
  $(function () {
    $('#data').DataTable({
      responsive: true,
      autoWidth: false,
      language: {
        "decimal": "",
        "emptyTable": "No hay información",
        "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
        "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
        "infoFiltered": "(Filtrado de _MAX_ total entradas)",
        "infoPostFix": "",
        "thousands": ",",
        "lengthMenu": "Mostrar _MENU_ Entradas",
        "loadingRecords": "Cargando...",
        "processing": "Procesando...",
        "search": "Buscar:",
        "zeroRecords": "Sin resultados encontrados",
        "paginate": {
          "first": "Primero",
          "last": "Ultimo",
          "next": "Siguiente",
          "previous": "Anterior"
        }
      },

    });
  });
</script>
{% endblock %}